(function(e){function t(t){for(var a,i,s=t[0],l=t[1],u=t[2],d=0,m=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0767":function(e,t,n){},"3a09":function(e,t,n){"use strict";var a=n("0767"),r=n.n(a);r.a},"417d":function(e,t,n){"use strict";var a=n("4c6c"),r=n.n(a);r.a},"4c6c":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},"5e91":function(e,t,n){"use strict";var a=n("e1b9"),r=n.n(a);r.a},"9c0c":function(e,t,n){},ab34:function(e,t,n){},bde0:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"u-b0",attrs:{id:"app"}},[n("Calendar")],1)},o=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"calendar"},[n("CalendarHeader",{attrs:{"calendar-days":e.calendarDays}}),n("CalendarBody",{attrs:{"calendar-days":e.calendarDays,events:e.events}}),n("CalendarModal",{attrs:{events:e.events},on:{addEvent:e.onAddEvent}})],1)},s=[],l=(n("7db0"),n("fb6a"),n("53ca")),u=(n("99af"),n("4de4"),n("4160"),n("159b"),n("b85c")),c=n("d4ec"),d=n("bee2"),m=n("f817"),v=function(){function e(t){Object(c["a"])(this,e),this.workingHoursUsual={from:{hours:8,minutes:0},to:{hours:14,minutes:0}},this.workingHoursAlternative={from:{hours:13,minutes:0},to:{hours:19,minutes:0}},this.breakUsual={from:{hours:11,minutes:0},to:{hours:11,minutes:30}},this.breakAlternative={from:{hours:16,minutes:0},to:{hours:16,minutes:30}},this.startingDate=null!=t?Object(m["a"])(t):null}return Object(d["a"])(e,[{key:"generateNDays",value:function(e){if(null==this.startingDate)return console.error("Starting date is not set"),[];for(var t=[],n=this.startingDate.clone(),a=0;a<e;a++)t.push(this.generateDay(n)),n=n.clone().add(1,"d");return t}},{key:"generateDay",value:function(t){var n=this.workingHoursUsual,a={hours:this.breakUsual.from.hours,minutes:this.breakUsual.from.minutes,date:t.format("MM/DD/YYYY")},r={hours:this.breakUsual.to.hours,minutes:this.breakUsual.to.minutes,date:t.format("MM/DD/YYYY")},o=e.constructEvent({title:"Pauza",from:a,to:r,isBreak:!0});return t.date()%2&&(n=this.workingHoursAlternative,a.hours=this.breakAlternative.from.hours,a.minutes=this.breakAlternative.from.minutes,r.hours=this.breakAlternative.to.hours,r.minutes=this.breakAlternative.to.minutes,o=e.constructEvent({title:"Pauza",from:a,to:r,isBreak:!0})),(6===t.weekday()||5===t.weekday()&&t.date()%2!==0)&&(n=null,o=null),{momentObject:t,workingHours:n,breakEvent:o}}}],[{key:"constructEvent",value:function(e){var t,n=e.title,a=e.from,r=e.to,o=e.isUserGenerated,i=void 0!==o&&o,s=e.isBreak,l=void 0!==s&&s,u=Object(m["a"])("".concat(a.date," ").concat(a.hours,":").concat(a.minutes));return t=null==r?u.clone().add(30,"m"):Object(m["a"])("".concat(r.date," ").concat(r.hours,":").concat(r.minutes)),{title:n,time:{from:{hours:a.hours,minutes:a.minutes},to:{hours:t.hour(),minutes:t.minute()}},momentObjectFrom:u,momentObjectTo:t,isUserGenerated:i,isBreak:l}}},{key:"generateRandomDate",value:function(e,t){var n=e.unix()+Math.random()*(t.unix()-e.unix()),a=n-n%1800;return Object(m["a"])(1e3*a)}},{key:"validateEvent",value:function(e,t){if(null===t.workingHours)return!1;var n=t.momentObject.clone().hour(t.workingHours.from.hours).minute(t.workingHours.from.minutes),a=t.momentObject.clone().hour(t.workingHours.to.hours).minute(t.workingHours.to.minutes);return e.momentObjectFrom.valueOf()>=n.valueOf()&&e.momentObjectTo.valueOf()<=a.valueOf()}},{key:"validateOverlapping",value:function(e,t,n){var a=!1;return n.breakEvent&&t.slice().push(n.breakEvent),t.forEach((function(t){var n=t.momentObjectFrom,r=t.momentObjectTo;(Math.max(n.valueOf(),e.momentObjectFrom.valueOf())<Math.min(r.valueOf(),e.momentObjectTo.valueOf())||n.isSame(e.momentObjectFrom))&&(a=!0)})),a}},{key:"validateMaximumNumberOfEvents",value:function(e,t){var n=t.filter((function(e){return e.isUserGenerated}));if(n.length>=2)return"Ne možete zakazati više od dva termina tjedno";var a,r=Object(u["a"])(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.momentObjectFrom.isSame(e.momentObjectFrom,"day")&&o.isUserGenerated)return"Ne možete zakazati više od jednog termina dnevno!"}}catch(i){r.e(i)}finally{r.f()}return!0}}]),e}(),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"calendar__header"},[e.calendarDays.length>0?n("div",{staticClass:"calendar__header-title"},[n("h4",{staticClass:"u-a3"},[e._v(" "+e._s(e.calendarHeaderTitle)+" ")])]):e._e(),n("div",{staticClass:"calendar__header-cells"},e._l(e.calendarDays,(function(t){return n("div",{key:t.momentObject.format(),staticClass:"calendar__header-cell u-a1"},[n("span",[e._v(e._s(e.isSmallScreenSize?t.momentObject.format("Do"):t.momentObject.format("dddd Do")))])])})),0)])},h=[],p=(n("a15b"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("2909")),b=a["a"].extend({name:"CalendarHeader",data:function(){return{windowWidth:0}},props:["calendarDays"],computed:{isSmallScreenSize:function(){return this.windowWidth<=650},calendarHeaderTitle:function(){if(this.calendarDays.length<=0)return"";var e=new Set;return e.add(this.calendarDays[0].momentObject.format("MMMM")),e.add(this.calendarDays.slice(-1)[0].momentObject.format("MMMM")),"".concat(Object(p["a"])(e).join(" - ")," - ").concat(this.calendarDays[0].momentObject.format("yyyy"),".")}},methods:{handleResize:function(){this.windowWidth=window.innerWidth}},created:function(){window.addEventListener("resize",this.handleResize),this.windowWidth=window.innerWidth},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)}}),y=b,g=(n("5e91"),n("2877")),_=Object(g["a"])(y,f,h,!1,null,"028baa72",null),w=_.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"calendar__body"},[n("div",{staticClass:"calendar__time-column"},e._l(e.hoursInDay,(function(t){return n("div",{key:t,staticClass:"calendar__time-cell"},[e._v(" "+e._s(e.formatTime(t))+" ")])})),0),n("div",{staticClass:"calendar__body-cells"},e._l(e.calendarDays,(function(t){return n("div",{key:t.momentObject.valueOf(),staticClass:"calendar__body-cell"},[n("CalendarCell",{attrs:{"calendar-day":t,events:e.getEventsForDay(t)}})],1)})),0)])},k=[],j=420;function D(e,t){return"".concat(e<10?"0".concat(e):e,":").concat(t<10?"0".concat(t):t)}function C(e,t){return 60*e+t}function E(e,t){return 60*e+t-j}var M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.calendarDay.workingHours?n("div",{staticClass:"calendar__working-hours",style:{height:e.workingHoursHeight,top:e.workingHoursTop},on:{click:e.onCreateEvent}}):e._e(),e._l(e.allEvents,(function(e,t){return n("CalendarEvent",{key:t,attrs:{event:e}})}))],2)},x=[],H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"calendar__event u-b1",class:{"is-user-generated":e.event.isUserGenerated,"is-break":e.event.isBreak},style:{height:e.eventHeight,top:e.eventTop},on:{mouseenter:function(t){e.isTooltipVisible=!0},mouseleave:function(t){e.isTooltipVisible=!1}}},[n("p",{staticClass:"calendar__event-name"},[e._v(e._s(e.event.title))]),n("transition",{attrs:{name:"slide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isTooltipVisible,expression:"isTooltipVisible"}],staticClass:"calendar__additional-info"},[n("h6",{staticClass:"u-a3"},[e._v(e._s(e.event.title))]),n("span",{staticClass:"u-b0"},[e._v(e._s(e.event.momentObjectFrom.format("HH:mm"))+" - "+e._s(e.event.momentObjectTo.format("HH:mm")))])])])],1)},S=[],I=a["a"].extend({name:"CalendarEvent",props:["event"],computed:{eventHeight:function(){var e=C(this.event.time.to.hours,this.event.time.to.minutes),t=C(this.event.time.from.hours,this.event.time.from.minutes);return e-t+"px"},eventTop:function(){var e=E(this.event.time.from.hours,this.event.time.from.minutes);return e+"px"}},data:function(){return{isTooltipVisible:!1}}}),T=I,Y=(n("417d"),Object(g["a"])(T,H,S,!1,null,"3d326ef1",null)),z=Y.exports,$=new a["a"],P=$,U={openModal:"openModal",addEvent:"addEvent",editEvent:"editEvent"},N=a["a"].extend({name:"CalendarCell",components:{CalendarEvent:z},props:["calendarDay","events"],computed:{workingHoursHeight:function(){if(null==this.calendarDay.workingHours)return 0;var e=C(this.calendarDay.workingHours.to.hours,this.calendarDay.workingHours.to.minutes),t=C(this.calendarDay.workingHours.from.hours,this.calendarDay.workingHours.from.minutes);return e-t+"px"},workingHoursTop:function(){if(null==this.calendarDay.workingHours)return 0;var e=E(this.calendarDay.workingHours.from.hours,this.calendarDay.workingHours.from.minutes);return e+"px"},allEvents:function(){var e=this.events;return this.calendarDay.breakEvent&&e.push(this.calendarDay.breakEvent),e}},methods:{onCreateEvent:function(e){var t=e.target;null!==t&&P.$emit(U.openModal,{yPosition:e.offsetY+t.offsetTop,date:this.calendarDay})}}}),V=N,A=(n("3a09"),Object(g["a"])(V,M,x,!1,null,"408a9841",null)),F=A.exports,B=a["a"].extend({name:"CalendarBody",components:{CalendarCell:F},data:function(){return{hoursInDay:Object(p["a"])(Array(24).keys()).filter((function(e){return e>=7&&e<=20}))}},props:["calendarDays","events"],methods:{formatTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return D(e,t)},getEventsForDay:function(e){return this.events.filter((function(t){return t.momentObjectFrom.isSame(e.momentObject,"day")}))}}}),G=B,R=(n("f80b"),Object(g["a"])(G,O,k,!1,null,"66bb1e68",null)),W=R.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"}],staticClass:"modal__wrapper"},[n("div",{staticClass:"modal"},[n("h6",{staticClass:"u-a2 modal__title"},[e._v("Rezerviraj novi termin")]),n("label",{staticClass:"modal-row"},[n("span",[e._v("Naziv")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.eventInfo.title,expression:"eventInfo.title"}],attrs:{type:"text"},domProps:{value:e.eventInfo.title},on:{input:function(t){t.target.composing||e.$set(e.eventInfo,"title",t.target.value)}}})]),n("label",{staticClass:"modal-row"},[n("span",[e._v("Datum")]),n("datepicker",{attrs:{format:"dd.MM.yyyy.",language:e.hr},model:{value:e.eventInfo.date,callback:function(t){e.$set(e.eventInfo,"date",t)},expression:"eventInfo.date"}})],1),n("label",{staticClass:"modal-row modal-row--small"},[n("span",[e._v("Sati")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.eventInfo.hours,expression:"eventInfo.hours"}],attrs:{maxlength:"2",type:"text"},domProps:{value:e.eventInfo.hours},on:{input:function(t){t.target.composing||e.$set(e.eventInfo,"hours",t.target.value)}}})]),n("label",{staticClass:"modal-row modal-row--small"},[n("span",[e._v("Minute")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.eventInfo.minutes,expression:"eventInfo.minutes"}],attrs:{maxlength:"2",type:"text"},domProps:{value:e.eventInfo.minutes},on:{input:function(t){t.target.composing||e.$set(e.eventInfo,"minutes",t.target.value)}}})]),n("button",{staticClass:"modal__close-button",on:{click:e.onClose}},[e._v("×")]),n("button",{staticClass:"modal__button u-a3",on:{click:e.onCreateEvent}},[e._v(" Stvori ")])])])},L=[],q=(n("498a"),n("fa33")),K=n("2430"),Q=a["a"].extend({name:"CalendarModal",props:["events"],components:{Datepicker:q["a"]},data:function(){return{isVisible:!1,eventInfo:{date:new Date,hours:"",minutes:"",title:""},calendarDay:null,hr:K["hr"],calendarService:null}},methods:{onClose:function(){this.isVisible=!1},onOpen:function(e){var t=e.yPosition,n=e.date;this.isVisible=!0;var a=Math.floor(t/60+7),r=t%60;this.eventInfo.hours=a<10?"0".concat(a):String(a),this.eventInfo.minutes=r<10?"0".concat(r):String(r),this.eventInfo.date=n.momentObject.toDate(),this.calendarDay=n},createEvent:function(e,t,n){if(!(this.eventInfo.title.trim().length<=0))return v.constructEvent({title:this.eventInfo.title,from:{hours:e,minutes:t,date:n.format("MM/DD/YYYY")},isUserGenerated:!0});this.$toasted.error("Molimo da ispravno upišete naziv termina")},onCreateEvent:function(){if(null!=this.calendarDay&&null!=this.calendarService){var e=this.calendarService.generateDay(Object(m["a"])(this.eventInfo.date)),t=this.createEvent(+this.eventInfo.hours,+this.eventInfo.minutes,Object(m["a"])(this.eventInfo.date));if(null!=t){var n=v.validateMaximumNumberOfEvents(t,this.events);"string"!==typeof n?v.validateEvent(t,e)?v.validateOverlapping(t,[].concat(Object(p["a"])(this.events),[e.breakEvent]),e)?this.$toasted.error("Vrijeme termina se preklapa s postojećim terminom. Morate zakazati slobodan termin!"):(this.$emit(U.addEvent,t),this.onClose()):this.$toasted.error("Vrijeme termina nije ispravno. Molimo provjerite da se nalazi unutar radnog vremena."):this.$toasted.error(n)}}}},created:function(){P.$on(U.openModal,this.onOpen),this.calendarService=new v},beforeDestroy:function(){P.$off(U.openModal,this.onOpen)}}),X=Q,Z=(n("e265"),Object(g["a"])(X,J,L,!1,null,"cc46ed32",null)),ee=Z.exports,te=a["a"].extend({name:"Calendar",components:{CalendarBody:W,CalendarHeader:w,CalendarModal:ee},data:function(){return{calendarService:null,calendarDays:[],events:[]}},created:function(){var e=new Date;e.setDate((new Date).getDate()+1),this.calendarService=new v(e),this.constructCalendar()},methods:{constructCalendar:function(){var e=this,t=[];if(null!=this.calendarService){this.calendarDays=this.calendarService.generateNDays(7);var n=function(){var n=v.generateRandomDate(e.calendarDays[0].momentObject,e.calendarDays.slice(-1)[0].momentObject),a=e.calendarDays.find((function(e){return e.momentObject.isSame(n,"day")}));if(null==a)return{v:void 0};var r=n.clone().add(30,"minutes"),o=v.constructEvent({title:"Termin ".concat(t.length),from:{hours:n.hour(),minutes:n.minute(),date:n.format("MM/DD/YYYY")},to:{hours:r.hour(),minutes:r.minute(),date:r.format("MM/DD/YYYY")}});v.validateEvent(o,a)&&!v.validateOverlapping(o,t,a)&&t.push(o)};while(t.length<15){var a=n();if("object"===Object(l["a"])(a))return a.v}this.events=t}else console.error("CalendarService is not initialized.")},onAddEvent:function(e){this.events.push(e)}}}),ne=te,ae=(n("f126"),Object(g["a"])(ne,i,s,!1,null,"45ce20f9",null)),re=ae.exports,oe=a["a"].extend({name:"App",components:{Calendar:re}}),ie=oe,se=(n("5c0b"),Object(g["a"])(ie,r,o,!1,null,null,null)),le=se.exports,ue=(n("9347"),n("a65d")),ce=n.n(ue);a["a"].use(ce.a,{duration:3e3,position:"bottom-right",containerClass:"u-b0"}),m["a"].locale("hr"),a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(le)}}).$mount("#app")},d0c4:function(e,t,n){},e1b9:function(e,t,n){},e265:function(e,t,n){"use strict";var a=n("ab34"),r=n.n(a);r.a},f126:function(e,t,n){"use strict";var a=n("d0c4"),r=n.n(a);r.a},f80b:function(e,t,n){"use strict";var a=n("bde0"),r=n.n(a);r.a}});
//# sourceMappingURL=app.5ec84979.js.map